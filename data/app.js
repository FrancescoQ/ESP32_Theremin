var dt=Object.defineProperty,ut=Object.defineProperties;var ht=Object.getOwnPropertyDescriptors;var Oe=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var Me=(e,t,n)=>t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))ft.call(t,n)&&Me(e,n,t[n]);if(Oe)for(var n of Oe(t))mt.call(t,n)&&Me(e,n,t[n]);return e},V=(e,t)=>ut(e,ht(t));(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();var re,v,qe,B,Te,ze,Ke,Ge,be,he,fe,Je,G={},Ye=[],_t=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ne=Array.isArray;function R(e,t){for(var n in t)e[n]=t[n];return e}function xe(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ye(e,t,n){var a,l,o,d={};for(o in t)o=="key"?a=t[o]:o=="ref"?l=t[o]:d[o]=t[o];if(arguments.length>2&&(d.children=arguments.length>3?re.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)d[o]===void 0&&(d[o]=e.defaultProps[o]);return Q(e,d,a,l,null)}function Q(e,t,n,a,l){var o={type:e,props:t,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l==null?++qe:l,__i:-1,__u:0};return l==null&&v.vnode!=null&&v.vnode(o),o}function J(e){return e.children}function X(e,t){this.props=e,this.context=t}function q(e,t){if(t==null)return e.__?q(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?q(e):null}function Qe(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Qe(e)}}function me(e){(!e.__d&&(e.__d=!0)&&B.push(e)&&!ee.__r++||Te!=v.debounceRendering)&&((Te=v.debounceRendering)||ze)(ee)}function ee(){for(var e,t,n,a,l,o,d,i=1;B.length;)B.length>i&&B.sort(Ke),e=B.shift(),i=B.length,e.__d&&(n=void 0,a=void 0,l=(a=(t=e).__v).__e,o=[],d=[],t.__P&&((n=R({},a)).__v=a.__v+1,v.vnode&&v.vnode(n),ve(t.__P,n,a,t.__n,t.__P.namespaceURI,32&a.__u?[l]:null,o,l==null?q(a):l,!!(32&a.__u),d),n.__v=a.__v,n.__.__k[n.__i]=n,et(o,n,d),a.__e=a.__=null,n.__e!=l&&Qe(n)));ee.__r=0}function Xe(e,t,n,a,l,o,d,i,h,c,f){var s,m,g,x,y,p,u,_=a&&a.__k||Ye,T=t.length;for(h=gt(n,t,_,h,T),s=0;s<T;s++)(g=n.__k[s])!=null&&(m=g.__i==-1?G:_[g.__i]||G,g.__i=s,p=ve(e,g,m,l,o,d,i,h,c,f),x=g.__e,g.ref&&m.ref!=g.ref&&(m.ref&&ke(m.ref,null,g),f.push(g.ref,g.__c||x,g)),y==null&&x!=null&&(y=x),(u=!!(4&g.__u))||m.__k===g.__k?h=Ze(g,h,e,u):typeof g.type=="function"&&p!==void 0?h=p:x&&(h=x.nextSibling),g.__u&=-7);return n.__e=y,h}function gt(e,t,n,a,l){var o,d,i,h,c,f=n.length,s=f,m=0;for(e.__k=new Array(l),o=0;o<l;o++)(d=t[o])!=null&&typeof d!="boolean"&&typeof d!="function"?(h=o+m,(d=e.__k[o]=typeof d=="string"||typeof d=="number"||typeof d=="bigint"||d.constructor==String?Q(null,d,null,null,null):ne(d)?Q(J,{children:d},null,null,null):d.constructor==null&&d.__b>0?Q(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d).__=e,d.__b=e.__b+1,i=null,(c=d.__i=pt(d,n,h,s))!=-1&&(s--,(i=n[c])&&(i.__u|=2)),i==null||i.__v==null?(c==-1&&(l>f?m--:l<f&&m++),typeof d.type!="function"&&(d.__u|=4)):c!=h&&(c==h-1?m--:c==h+1?m++:(c>h?m--:m++,d.__u|=4))):e.__k[o]=null;if(s)for(o=0;o<f;o++)(i=n[o])!=null&&!(2&i.__u)&&(i.__e==a&&(a=q(i)),rt(i,i));return a}function Ze(e,t,n,a){var l,o;if(typeof e.type=="function"){for(l=e.__k,o=0;l&&o<l.length;o++)l[o]&&(l[o].__=e,t=Ze(l[o],t,n,a));return t}e.__e!=t&&(a&&(t&&e.type&&!t.parentNode&&(t=q(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function pt(e,t,n,a){var l,o,d,i=e.key,h=e.type,c=t[n],f=c!=null&&(2&c.__u)==0;if(c===null&&e.key==null||f&&i==c.key&&h==c.type)return n;if(a>(f?1:0)){for(l=n-1,o=n+1;l>=0||o<t.length;)if((c=t[d=l>=0?l--:o++])!=null&&!(2&c.__u)&&i==c.key&&h==c.type)return d}return-1}function De(e,t,n){t[0]=="-"?e.setProperty(t,n==null?"":n):e[t]=n==null?"":typeof n!="number"||_t.test(t)?n:n+"px"}function Y(e,t,n,a,l){var o,d;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof a=="string"&&(e.style.cssText=a=""),a)for(t in a)n&&t in n||De(e.style,t,"");if(n)for(t in n)a&&n[t]==a[t]||De(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(Ge,"$1")),d=t.toLowerCase(),t=d in e||t=="onFocusOut"||t=="onFocusIn"?d.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?a?n.u=a.u:(n.u=be,e.addEventListener(t,o?fe:he,o)):e.removeEventListener(t,o?fe:he,o);else{if(l=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n==null?"":n;break e}catch(i){}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Pe(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=be++;else if(t.t<n.u)return;return n(v.event?v.event(t):t)}}}function ve(e,t,n,a,l,o,d,i,h,c){var f,s,m,g,x,y,p,u,_,T,D,b,N,C,S,M,F,O=t.type;if(t.constructor!=null)return null;128&n.__u&&(h=!!(32&n.__u),o=[i=t.__e=n.__e]),(f=v.__b)&&f(t);e:if(typeof O=="function")try{if(u=t.props,_="prototype"in O&&O.prototype.render,T=(f=O.contextType)&&a[f.__c],D=f?T?T.props.value:f.__:a,n.__c?p=(s=t.__c=n.__c).__=s.__E:(_?t.__c=s=new O(u,D):(t.__c=s=new X(u,D),s.constructor=O,s.render=xt),T&&T.sub(s),s.props=u,s.state||(s.state={}),s.context=D,s.__n=a,m=s.__d=!0,s.__h=[],s._sb=[]),_&&s.__s==null&&(s.__s=s.state),_&&O.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=R({},s.__s)),R(s.__s,O.getDerivedStateFromProps(u,s.__s))),g=s.props,x=s.state,s.__v=t,m)_&&O.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),_&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(_&&O.getDerivedStateFromProps==null&&u!==g&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(u,D),!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(u,s.__s,D)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(s.props=u,s.state=s.__s,s.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(U){U&&(U.__=t)}),b=0;b<s._sb.length;b++)s.__h.push(s._sb[b]);s._sb=[],s.__h.length&&d.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(u,s.__s,D),_&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(g,x,y)})}if(s.context=D,s.props=u,s.__P=e,s.__e=!1,N=v.__r,C=0,_){for(s.state=s.__s,s.__d=!1,N&&N(t),f=s.render(s.props,s.state,s.context),S=0;S<s._sb.length;S++)s.__h.push(s._sb[S]);s._sb=[]}else do s.__d=!1,N&&N(t),f=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++C<25);s.state=s.__s,s.getChildContext!=null&&(a=R(R({},a),s.getChildContext())),_&&!m&&s.getSnapshotBeforeUpdate!=null&&(y=s.getSnapshotBeforeUpdate(g,x)),M=f,f!=null&&f.type===J&&f.key==null&&(M=tt(f.props.children)),i=Xe(e,ne(M)?M:[M],t,n,a,l,o,d,i,h,c),s.base=t.__e,t.__u&=-161,s.__h.length&&d.push(s),p&&(s.__E=s.__=null)}catch(U){if(t.__v=null,h||o!=null)if(U.then){for(t.__u|=h?160:128;i&&i.nodeType==8&&i.nextSibling;)i=i.nextSibling;o[o.indexOf(i)]=null,t.__e=i}else{for(F=o.length;F--;)xe(o[F]);_e(t)}else t.__e=n.__e,t.__k=n.__k,U.then||_e(t);v.__e(U,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):i=t.__e=bt(n.__e,t,n,a,l,o,d,h,c);return(f=v.diffed)&&f(t),128&t.__u?void 0:i}function _e(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(_e)}function et(e,t,n){for(var a=0;a<n.length;a++)ke(n[a],n[++a],n[++a]);v.__c&&v.__c(t,e),e.some(function(l){try{e=l.__h,l.__h=[],e.some(function(o){o.call(l)})}catch(o){v.__e(o,l.__v)}})}function tt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ne(e)?e.map(tt):R({},e)}function bt(e,t,n,a,l,o,d,i,h){var c,f,s,m,g,x,y,p=n.props,u=t.props,_=t.type;if(_=="svg"?l="http://www.w3.org/2000/svg":_=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((g=o[c])&&"setAttribute"in g==!!_&&(_?g.localName==_:g.nodeType==3)){e=g,o[c]=null;break}}if(e==null){if(_==null)return document.createTextNode(u);e=document.createElementNS(l,_,u.is&&u),i&&(v.__m&&v.__m(t,o),i=!1),o=null}if(_==null)p===u||i&&e.data==u||(e.data=u);else{if(o=o&&re.call(e.childNodes),p=n.props||G,!i&&o!=null)for(p={},c=0;c<e.attributes.length;c++)p[(g=e.attributes[c]).name]=g.value;for(c in p)if(g=p[c],c!="children"){if(c=="dangerouslySetInnerHTML")s=g;else if(!(c in u)){if(c=="value"&&"defaultValue"in u||c=="checked"&&"defaultChecked"in u)continue;Y(e,c,null,g,l)}}for(c in u)g=u[c],c=="children"?m=g:c=="dangerouslySetInnerHTML"?f=g:c=="value"?x=g:c=="checked"?y=g:i&&typeof g!="function"||p[c]===g||Y(e,c,g,p[c],l);if(f)i||s&&(f.__html==s.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(s&&(e.innerHTML=""),Xe(t.type=="template"?e.content:e,ne(m)?m:[m],t,n,a,_=="foreignObject"?"http://www.w3.org/1999/xhtml":l,o,d,o?o[0]:n.__k&&q(n,0),i,h),o!=null)for(c=o.length;c--;)xe(o[c]);i||(c="value",_=="progress"&&x==null?e.removeAttribute("value"):x!=null&&(x!==e[c]||_=="progress"&&!x||_=="option"&&x!=p[c])&&Y(e,c,x,p[c],l),c="checked",y!=null&&y!=e[c]&&Y(e,c,y,p[c],l))}return e}function ke(e,t,n){try{if(typeof e=="function"){var a=typeof e.__u=="function";a&&e.__u(),a&&t==null||(e.__u=e(t))}else e.current=t}catch(l){v.__e(l,n)}}function rt(e,t,n){var a,l;if(v.unmount&&v.unmount(e),(a=e.ref)&&(a.current&&a.current!=e.__e||ke(a,null,t)),(a=e.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(o){v.__e(o,t)}a.base=a.__P=null}if(a=e.__k)for(l=0;l<a.length;l++)a[l]&&rt(a[l],t,n||typeof e.type!="function");n||xe(e.__e),e.__c=e.__=e.__e=void 0}function xt(e,t,n){return this.constructor(e,n)}function yt(e,t,n){var a,l,o,d;t==document&&(t=document.documentElement),v.__&&v.__(e,t),l=(a=!1)?null:t.__k,o=[],d=[],ve(t,e=t.__k=ye(J,null,[e]),l||G,G,t.namespaceURI,l?null:t.firstChild?re.call(t.childNodes):null,o,l?l.__e:t.firstChild,a,d),et(o,e,d)}function vt(e){function t(n){var a,l;return this.getChildContext||(a=new Set,(l={})[t.__c]=this,this.getChildContext=function(){return l},this.componentWillUnmount=function(){a=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&a.forEach(function(d){d.__e=!0,me(d)})},this.sub=function(o){a.add(o);var d=o.componentWillUnmount;o.componentWillUnmount=function(){a&&a.delete(o),d&&d.call(o)}}),n.children}return t.__c="__cC"+Je++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,a){return n.children(a)}).contextType=t,t}re=Ye.slice,v={__e:function(e,t,n,a){for(var l,o,d;t=t.__;)if((l=t.__c)&&!l.__)try{if((o=l.constructor)&&o.getDerivedStateFromError!=null&&(l.setState(o.getDerivedStateFromError(e)),d=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(e,a||{}),d=l.__d),d)return l.__E=l}catch(i){e=i}throw e}},qe=0,X.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=R({},this.state),typeof e=="function"&&(e=e(R({},n),this.props)),e&&R(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),me(this))},X.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),me(this))},X.prototype.render=J,B=[],ze=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ke=function(e,t){return e.__v.__b-t.__v.__b},ee.__r=0,Ge=/(PointerCapture)$|Capture$/i,be=0,he=Pe(!1),fe=Pe(!0),Je=0;var kt=0;function r(e,t,n,a,l,o){t||(t={});var d,i,h=t;if("ref"in h)for(i in h={},t)i=="ref"?d=t[i]:h[i]=t[i];var c={type:e,props:h,key:n,ref:d,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--kt,__i:-1,__u:0,__source:l,__self:o};if(typeof e=="function"&&(d=e.defaultProps))for(i in d)h[i]===void 0&&(h[i]=d[i]);return v.vnode&&v.vnode(c),c}var z,k,oe,Ae,te=0,nt=[],E=v,We=E.__b,Le=E.__r,Ue=E.diffed,je=E.__c,Ve=E.unmount,Re=E.__;function ae(e,t){E.__h&&E.__h(k,e,te||t),te=0;var n=k.__H||(k.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function w(e){return te=1,wt(ot,e)}function wt(e,t,n){var a=ae(z++,2);if(a.t=e,!a.__c&&(a.__=[ot(void 0,t),function(i){var h=a.__N?a.__N[0]:a.__[0],c=a.t(h,i);h!==c&&(a.__N=[c,a.__[1]],a.__c.setState({}))}],a.__c=k,!k.__f)){var l=function(i,h,c){if(!a.__c.__H)return!0;var f=a.__c.__H.__.filter(function(m){return!!m.__c});if(f.every(function(m){return!m.__N}))return!o||o.call(this,i,h,c);var s=a.__c.props!==i;return f.forEach(function(m){if(m.__N){var g=m.__[0];m.__=m.__N,m.__N=void 0,g!==m.__[0]&&(s=!0)}}),o&&o.call(this,i,h,c)||s};k.__f=!0;var o=k.shouldComponentUpdate,d=k.componentWillUpdate;k.componentWillUpdate=function(i,h,c){if(this.__e){var f=o;o=void 0,l(i,h,c),o=f}d&&d.call(this,i,h,c)},k.shouldComponentUpdate=l}return a.__N||a.__}function P(e,t){var n=ae(z++,3);!E.__s&&at(n.__H,t)&&(n.__=e,n.u=t,k.__H.__h.push(n))}function St(e,t){var n=ae(z++,7);return at(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Nt(e,t){return te=8,St(function(){return e},t)}function Et(e){var t=k.context[e.__c],n=ae(z++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(k)),t.props.value):e.__}function Ct(){for(var e;e=nt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Z),e.__H.__h.forEach(ge),e.__H.__h=[]}catch(t){e.__H.__h=[],E.__e(t,e.__v)}}E.__b=function(e){k=null,We&&We(e)},E.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Re&&Re(e,t)},E.__r=function(e){Le&&Le(e),z=0;var t=(k=e.__c).__H;t&&(oe===k?(t.__h=[],k.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Z),t.__h.forEach(ge),t.__h=[],z=0)),oe=k},E.diffed=function(e){Ue&&Ue(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(nt.push(t)!==1&&Ae===E.requestAnimationFrame||((Ae=E.requestAnimationFrame)||$t)(Ct)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),oe=k=null},E.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Z),n.__h=n.__h.filter(function(a){return!a.__||ge(a)})}catch(a){t.some(function(l){l.__h&&(l.__h=[])}),t=[],E.__e(a,n.__v)}}),je&&je(e,t)},E.unmount=function(e){Ve&&Ve(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(a){try{Z(a)}catch(l){t=l}}),n.__H=void 0,t&&E.__e(t,n.__v))};var He=typeof requestAnimationFrame=="function";function $t(e){var t,n=function(){clearTimeout(a),He&&cancelAnimationFrame(t),setTimeout(e)},a=setTimeout(n,35);He&&(t=requestAnimationFrame(n))}function Z(e){var t=k,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),k=t}function ge(e){var t=k;e.__c=e.__(),k=t}function at(e,t){return!e||e.length!==t.length||t.some(function(n,a){return n!==e[a]})}function ot(e,t){return typeof t=="function"?t(e):t}const lt=vt(null);function Ft({children:e,url:t}){const[n,a]=w(null),[l,o]=w(!1),[d,i]=w({oscillators:{},effects:{},sensor:{},performance:{},system:{},tuner:{}}),[h,c]=w(null);P(()=>{let m,g;const x=()=>{try{const y=t||`ws://${window.location.hostname}/ws`;m=new WebSocket(y),m.onopen=()=>{console.log("WebSocket connected"),o(!0),c(null)},m.onmessage=p=>{try{const u=JSON.parse(p.data);u.type==="complete"?i({oscillators:u.oscillators||{},effects:u.effects||{},sensor:u.sensor||{},performance:u.performance||{},system:u.system||{},tuner:u.tuner||{}}):u.type==="oscillator"?i(_=>V(A({},_),{oscillators:V(A({},_.oscillators),{[u.osc]:u})})):u.type==="effect"?i(_=>V(A({},_),{effects:V(A({},_.effects),{[u.effect]:u})})):u.type==="sensor"?i(_=>V(A({},_),{sensor:u})):u.type==="performance"?i(_=>V(A({},_),{performance:u})):u.type==="system"&&i(_=>V(A({},_),{system:u}))}catch(u){console.error("JSON parsing error:",u)}},m.onerror=p=>{console.error("WebSocket error:",p),c("WebSocket connection error")},m.onclose=()=>{console.log("WebSocket disconnected"),o(!1),a(null),g=setTimeout(()=>{console.log("Attempting reconnection..."),x()},3e3)},a(m)}catch(y){console.error("Error creating WebSocket:",y),c(y.message)}};return x(),()=>{g&&clearTimeout(g),m&&m.close()}},[t]);const f=Nt(m=>{n&&l?n.send(typeof m=="string"?m:JSON.stringify(m)):console.warn("WebSocket not connected")},[n,l]),s={connected:l,data:d,error:h,send:f};return ye(lt.Provider,{value:s},e)}function L(){const e=Et(lt);if(!e)throw new Error("useWebSocket must be used inside WebSocketProvider");return e}function W({title:e,value:t,unit:n,description:a=""}){const[l,o]=w(!1);return r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[r("div",{class:"flex items-center justify-between mb-4",children:[r("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:e}),a&&r("button",{onClick:()=>o(!l),class:"w-6 h-6 rounded-full bg-blue-500 hover:bg-blue-600 text-white flex items-center justify-center text-sm font-bold transition-colors cursor-pointer","aria-label":"Toggle description",children:"i"})]}),r("div",{class:"flex items-baseline",children:[r("span",{class:"text-3xl font-bold text-gray-900 dark:text-white",children:t!=null?t:"--"}),n&&r("span",{class:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:n})]}),a&&l&&r("div",{class:"text-sm text-blue-800 dark:text-blue-200 mt-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-md",children:a})]})}function st(){var a,l,o,d,i,h,c,f,s,m,g,x,y,p,u,_,T,D,b,N,C,S,M,F,O,U,we,Se,Ne,Ee,Ce,$e;const{data:e}=L(),t=j=>{if(!j)return"0s";const $=Math.floor(j/1e3),H=Math.floor($/60),I=Math.floor(H/60),Fe=Math.floor(I/24);return Fe>0?`${Fe}d ${I%24}h`:I>0?`${I}h ${H%60}m`:H>0?`${H}m ${$%60}s`:`${$}s`},n=j=>{if(!j)return"0 KB";const $=j/1024;return $>1024?`${($/1024).toFixed(2)} MB`:`${$.toFixed(2)} KB`};return r("div",{class:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r("section",{class:"mb-8",children:[r("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Oscillators"}),r("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(j=>{var I;const $=((I=e.oscillators)==null?void 0:I[j])||{},H=$.waveform&&$.waveform!=="OFF";return r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r("div",{class:"flex items-center justify-between mb-4",children:[r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white",children:["Oscillator ",j]}),r("span",{class:`px-2 py-1 rounded text-xs font-semibold ${H?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:H?"ACTIVE":"OFF"})]}),r("div",{class:"space-y-2 text-sm",children:[r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Waveform:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:$.waveform||"OFF"})]}),r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Octave:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:$.octave!==void 0?$.octave>0?`+${$.octave}`:$.octave:"0"})]}),r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Volume:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:$.volume!==void 0?`${Math.round($.volume*100)}%`:"0%"})]})]})]},j)})})]}),r("section",{class:"mb-8",children:[r("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Effects"}),r("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r("div",{class:"flex items-center justify-between mb-4",children:[r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white",children:"Delay"}),r("span",{class:`px-2 py-1 rounded text-xs font-semibold ${(l=(a=e.effects)==null?void 0:a.delay)!=null&&l.enabled?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:(d=(o=e.effects)==null?void 0:o.delay)!=null&&d.enabled?"ON":"OFF"})]}),((h=(i=e.effects)==null?void 0:i.delay)==null?void 0:h.enabled)&&r("div",{class:"space-y-2 text-sm",children:[r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Time:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:[e.effects.delay.time||0," ms"]})]}),r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Feedback:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:[((e.effects.delay.feedback||0)*100).toFixed(0),"%"]})]}),r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Mix:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:[((e.effects.delay.mix||0)*100).toFixed(0),"%"]})]})]})]}),r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r("div",{class:"flex items-center justify-between mb-4",children:[r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white",children:"Chorus"}),r("span",{class:`px-2 py-1 rounded text-xs font-semibold ${(f=(c=e.effects)==null?void 0:c.chorus)!=null&&f.enabled?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:(m=(s=e.effects)==null?void 0:s.chorus)!=null&&m.enabled?"ON":"OFF"})]}),((x=(g=e.effects)==null?void 0:g.chorus)==null?void 0:x.enabled)&&r("div",{class:"space-y-2 text-sm",children:[r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Rate:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:[(e.effects.chorus.rate||0).toFixed(1)," Hz"]})]}),r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Depth:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:(e.effects.chorus.depth||0).toFixed(1)})]}),r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Mix:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:[((e.effects.chorus.mix||0)*100).toFixed(0),"%"]})]})]})]}),r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r("div",{class:"flex items-center justify-between mb-4",children:[r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white",children:"Reverb"}),r("span",{class:`px-2 py-1 rounded text-xs font-semibold ${(p=(y=e.effects)==null?void 0:y.reverb)!=null&&p.enabled?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:(_=(u=e.effects)==null?void 0:u.reverb)!=null&&_.enabled?"ON":"OFF"})]}),((D=(T=e.effects)==null?void 0:T.reverb)==null?void 0:D.enabled)&&r("div",{class:"space-y-2 text-sm",children:[r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Room Size:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:[((e.effects.reverb.roomSize||0)*100).toFixed(0),"%"]})]}),r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Damping:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:[((e.effects.reverb.damping||0)*100).toFixed(0),"%"]})]}),r("div",{class:"flex justify-between",children:[r("span",{class:"text-gray-600 dark:text-gray-400",children:"Mix:"}),r("span",{class:"font-medium text-gray-900 dark:text-white",children:[((e.effects.reverb.mix||0)*100).toFixed(0),"%"]})]})]})]})]})]}),r("section",{class:"mb-8",children:[r("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"System Performance"}),r("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r(W,{title:"Free RAM",value:n((b=e.performance)==null?void 0:b.ram),unit:""}),r(W,{title:"Audio Task",value:((N=e.performance)==null?void 0:N.audioTime)!==void 0&&((C=e.performance)==null?void 0:C.maxAudioTime)!==void 0?`${e.performance.audioTime.toFixed(2)} / ${e.performance.maxAudioTime.toFixed(2)}`:"0.00 / 0.00",unit:"ms",description:"This is the time that the audio task takes, compared to the maximum available time calculated on buffer and sample values, es. 256 / 22050 * 1000 = 11.61 ms"}),r(W,{title:"Uptime",value:t((S=e.performance)==null?void 0:S.uptime),unit:""}),r(W,{title:"Connection",value:((M=e.sensor)==null?void 0:M.pitch)!==void 0?"Active":"Waiting",unit:""})]})]}),r("section",{class:"mb-8",children:[r("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"System Settings"}),r("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r(W,{title:"Pitch Smoothing",value:((F=e.system)==null?void 0:F.pitchSmoothing)===0?"None":((O=e.system)==null?void 0:O.pitchSmoothing)===2?"Extra":"Normal",unit:""}),r(W,{title:"Volume Smoothing",value:((U=e.system)==null?void 0:U.volumeSmoothing)===0?"None":((we=e.system)==null?void 0:we.volumeSmoothing)===2?"Extra":"Normal",unit:""}),r(W,{title:"Frequency Range",value:((Se=e.system)==null?void 0:Se.frequencyRange)===0?"Narrow":((Ne=e.system)==null?void 0:Ne.frequencyRange)===2?"Wide":"Normal",unit:""})]})]}),((Ee=e.sensor)==null?void 0:Ee.pitch)!==void 0&&r("section",{class:"mb-8",children:[r("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Sensor Readings"}),r("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r(W,{title:"Pitch Distance",value:((Ce=e.sensor.pitch)==null?void 0:Ce.toFixed(1))||"0",unit:"mm"}),r(W,{title:"Volume Distance",value:(($e=e.sensor.volume)==null?void 0:$e.toFixed(1))||"0",unit:"mm"})]})]}),r("section",{class:"mt-8",children:r("details",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[r("summary",{class:"cursor-pointer font-medium text-gray-700 dark:text-gray-300",children:"Debug: Raw WebSocket Data"}),r("pre",{class:"mt-4 p-4 bg-gray-100 dark:bg-gray-900 rounded overflow-auto text-xs text-gray-900 dark:text-gray-100",children:JSON.stringify(e,null,2)})]})})]})}function Ot({label:e,dataKey:t,onCommand:n,offCommand:a,value:l}){const{data:o,send:d}=L(),[i,h]=w(l!==void 0?l:!1);return P(()=>{o&&t&&o[t]!==void 0&&h(!!o[t])},[o,t]),P(()=>{l!==void 0&&h(l)},[l]),r("div",{class:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg shadow",children:[r("span",{class:"text-gray-700 dark:text-gray-300 font-medium",children:e}),r("button",{onClick:()=>{const f=!i;h(f),f&&n?d(typeof n=="string"?{command:n}:n):!f&&a&&d(typeof a=="string"?{command:a}:a)},class:`
          relative inline-flex h-8 w-14 items-center rounded-full
          transition-colors duration-200 ease-in-out
          focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800
          ${i?"bg-blue-500 dark:bg-blue-600":"bg-gray-300 dark:bg-gray-600"}
        `,children:r("span",{class:`
            inline-block h-6 w-6 transform rounded-full bg-white
            transition-transform duration-200 ease-in-out
            ${i?"translate-x-7":"translate-x-1"}
          `})})]})}function K({label:e,options:t,value:n,onChange:a,commandGenerator:l,dataKey:o}){const{data:d,send:i}=L(),[h,c]=w(n);return P(()=>{d&&o&&d[o]!==void 0&&(c(d[o]),a&&a(d[o]))},[d,o,a]),P(()=>{c(n)},[n]),r("div",{class:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg shadow",children:[r("span",{class:"text-gray-700 dark:text-gray-300 font-medium",children:e}),r("select",{value:h,onChange:s=>{const m=s.target.value;if(c(m),a&&a(m),l){const g=l(m);i(g)}},class:"px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 transition-colors",children:t.map(s=>r("option",{value:s,children:s},s))})]})}function it({label:e,value:t,onChange:n,commandGenerator:a,dataKey:l,min:o=0,max:d=100,step:i=1,unit:h="%"}){const{data:c,send:f}=L(),[s,m]=w(t);P(()=>{c&&l&&c[l]!==void 0&&(m(c[l]),n&&n(c[l]))},[c,l,n]),P(()=>{m(t)},[t]);const g=p=>{const u=parseFloat(p.target.value);if(m(u),n&&n(u),a){const _=a(u);f(_)}},x=d>o?(s-o)/(d-o)*100:0,y=i>=1?Math.round(s):s.toFixed(2);return r("div",{class:"flex flex-col p-4 bg-white dark:bg-gray-800 rounded-lg shadow space-y-2",children:[r("div",{class:"flex items-center justify-between",children:[r("span",{class:"text-gray-700 dark:text-gray-300 font-medium",children:e}),r("span",{class:"text-gray-600 dark:text-gray-400 text-sm font-mono",children:[y,h]})]}),r("input",{type:"range",min:o,max:d,step:i,value:s,onChange:g,class:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #3B82F6 0%, #3B82F6 ${x}%, ${document.documentElement.classList.contains("dark")?"#374151":"#E5E7EB"} ${x}%, ${document.documentElement.classList.contains("dark")?"#374151":"#E5E7EB"} 100%)`}})]})}function le({id:e}){const{data:t}=L(),[n,a]=w("SINE"),[l,o]=w(100),[d,i]=w("0");return P(()=>{var f;const c=(f=t.oscillators)==null?void 0:f[e];c&&(c.waveform&&a(c.waveform),c.volume!==void 0&&o(Math.round(c.volume*100)),c.octave!==void 0&&i(String(c.octave)))},[t.oscillators,e]),r("div",{class:"space-y-4",children:[r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[r("span",{class:`w-2 h-2 rounded-full ${n&&n!=="OFF"?"bg-green-500":"bg-red-500"}`}),"Oscillator ",e]}),r(K,{label:"Waveform",options:["OFF","SINE","SQUARE","TRIANGLE","SAW"],value:n,onChange:a,commandGenerator:c=>({cmd:"setWaveform",osc:e,value:c})}),r(K,{label:"Octave",options:["-1","0","1"],value:d,onChange:i,commandGenerator:c=>({cmd:"setOctave",osc:e,value:parseInt(c,10)})}),r(it,{label:"Volume",value:l,onChange:o,min:0,max:100,step:1,unit:"%",commandGenerator:c=>({cmd:"setVolume",osc:e,value:c/100})})]})}function Mt(){return r("div",{class:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:r("section",{class:"mb-8",children:[r("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Oscillators"}),r("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r(le,{id:1})}),r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r(le,{id:2})}),r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r(le,{id:3})})]})]})})}function se({effectName:e}){const{data:t}=L(),a={delay:{displayName:"Delay",parameters:[{name:"time",label:"Delay Time",min:10,max:2e3,step:10,unit:"ms",defaultValue:300},{name:"feedback",label:"Feedback",min:0,max:.95,step:.01,unit:"",defaultValue:.5},{name:"mix",label:"Mix",min:0,max:1,step:.01,unit:"",defaultValue:.3}]},chorus:{displayName:"Chorus",parameters:[{name:"rate",label:"Rate",min:.1,max:10,step:.1,unit:"Hz",defaultValue:2},{name:"depth",label:"Depth",min:1,max:50,step:1,unit:"ms",defaultValue:15},{name:"mix",label:"Mix",min:0,max:1,step:.01,unit:"",defaultValue:.5}]},reverb:{displayName:"Reverb",parameters:[{name:"roomSize",label:"Room Size",min:0,max:1,step:.01,unit:"",defaultValue:.5},{name:"damping",label:"Damping",min:0,max:1,step:.01,unit:"",defaultValue:.5},{name:"mix",label:"Mix",min:0,max:1,step:.01,unit:"",defaultValue:.3}]}}[e],[l,o]=w(a.parameters.reduce((i,h)=>(i[h.name]=h.defaultValue,i),{}));P(()=>{var h;const i=(h=t.effects)==null?void 0:h[e];if(i){const c={};a.parameters.forEach(f=>{i[f.name]!==void 0&&(c[f.name]=i[f.name])}),Object.keys(c).length>0&&o(f=>A(A({},f),c))}},[t.effects,e,a.parameters]);const d=(i,h)=>{o(c=>V(A({},c),{[i]:h}))};return r("div",{class:"space-y-4",children:[r(Ot,{label:"Enable",onCommand:{cmd:"enableEffect",effect:e,value:!0},offCommand:{cmd:"enableEffect",effect:e,value:!1}}),a.parameters.map(i=>r(it,{label:i.label,value:l[i.name],onChange:h=>d(i.name,h),min:i.min,max:i.max,step:i.step,unit:i.unit,commandGenerator:h=>({cmd:"setEffectParam",effect:e,param:i.name,value:h})},i.name))]})}function Tt(){const{data:e}=L();return r("div",{class:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:r("section",{class:"mb-8",children:[r("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Effects"}),r("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Delay"}),r(se,{effectName:"delay"})]}),r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Chorus"}),r(se,{effectName:"chorus"})]}),r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Reverb"}),r(se,{effectName:"reverb"})]})]})]})})}function Dt(){var c,f,s,m,g,x,y;const{data:e}=L(),[t,n]=w("1"),[a,l]=w("1"),[o,d]=w("1");P(()=>{e.system&&(e.system.pitchSmoothing!==void 0&&n(String(e.system.pitchSmoothing)),e.system.volumeSmoothing!==void 0&&l(String(e.system.volumeSmoothing)),e.system.frequencyRange!==void 0&&d(String(e.system.frequencyRange)))},[e.system]);const i=[{value:"0",label:"None (Instant)"},{value:"1",label:"Normal (Balanced)"},{value:"2",label:"Extra (Smooth)"}],h=[{value:"0",label:"Narrow (1 Octave)"},{value:"1",label:"Normal (2 Octaves)"},{value:"2",label:"Wide (3 Octaves)"}];return r("div",{class:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r("section",{class:"mb-8",children:[r("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Sensor Readings"}),r("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r(W,{title:"Pitch Distance",value:((f=(c=e.sensor)==null?void 0:c.pitch)==null?void 0:f.toFixed(1))||"0",unit:"mm"}),r(W,{title:"Volume Distance",value:((m=(s=e.sensor)==null?void 0:s.volume)==null?void 0:m.toFixed(1))||"0",unit:"mm"})]})]}),r("section",{class:"mb-8",children:[r("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Smoothing Configuration"}),r("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Pitch Smoothing"}),r("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Controls how smoothly the pitch responds to hand movement."}),r(K,{label:"Smoothing Level",options:i.map(p=>p.label),value:((g=i.find(p=>p.value===t))==null?void 0:g.label)||"Normal (Balanced)",onChange:p=>{const u=i.find(_=>_.label===p);u&&n(u.value)},commandGenerator:p=>{const u=i.find(_=>_.label===p);return{cmd:"setSmoothing",target:"pitch",value:parseInt((u==null?void 0:u.value)||"1",10)}}})]}),r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Volume Smoothing"}),r("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Controls how smoothly the volume responds to hand movement."}),r(K,{label:"Smoothing Level",options:i.map(p=>p.label),value:((x=i.find(p=>p.value===a))==null?void 0:x.label)||"Normal (Balanced)",onChange:p=>{const u=i.find(_=>_.label===p);u&&l(u.value)},commandGenerator:p=>{const u=i.find(_=>_.label===p);return{cmd:"setSmoothing",target:"volume",value:parseInt((u==null?void 0:u.value)||"1",10)}}})]})]})]}),r("section",{class:"mb-8",children:[r("h2",{class:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Frequency Range"}),r("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Playing Range"}),r("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Sets the frequency range (musical pitch range) of the theremin."}),r(K,{label:"Range Preset",options:h.map(p=>p.label),value:((y=h.find(p=>p.value===o))==null?void 0:y.label)||"Normal (2 Octaves)",onChange:p=>{const u=h.find(_=>_.label===p);u&&d(u.value)},commandGenerator:p=>{const u=h.find(_=>_.label===p);return{cmd:"setRange",value:parseInt((u==null?void 0:u.value)||"1",10)}}}),r("div",{class:"mt-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-md",children:r("p",{class:"text-sm text-blue-800 dark:text-blue-200",children:[r("strong",{children:"Narrow:"})," 1 octave range - tight playing area for precise control",r("br",{}),r("strong",{children:"Normal:"})," 2 octaves range - balanced (default)",r("br",{}),r("strong",{children:"Wide:"})," 3 octaves range - extended range for expressive playing"]})})]})]})]})}function Pt(){const{data:e}=L(),t=e.tuner,n=t&&t.frequency&&t.frequency>=20;return r("div",{className:"space-y-6",children:[r("h2",{className:"text-2xl font-bold",children:"Tuner"}),n?r(J,{children:[r("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[r("div",{className:"text-6xl font-bold mb-2",children:t.note}),r("div",{className:"text-xl text-gray-400",children:[t.frequency.toFixed(1)," Hz"]})]}),r("div",{className:"bg-gray-800 rounded-lg p-6",children:[r("div",{className:"mb-4 text-center",children:[r("span",{className:"text-lg font-semibold",children:[t.cents>0?"+":"",t.cents," cents"]}),r("span",{className:`ml-3 px-3 py-1 rounded text-sm font-medium ${t.inTune?"bg-green-500/20 text-green-400":Math.abs(t.cents)>25?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:t.inTune?"IN TUNE":t.cents<0?"FLAT":"SHARP"})]}),r("div",{className:"relative h-12 bg-gray-700 rounded-lg overflow-hidden",children:[r("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-gray-500 z-10"}),r("div",{className:"absolute top-0 bottom-0 bg-green-500/20",style:{left:"45%",width:"10%"}}),r("div",{className:`absolute top-0 bottom-0 w-1 transition-all duration-100 ${t.inTune?"bg-green-400":"bg-blue-400"}`,style:{left:`${50+t.cents*.4}%`,transform:"translateX(-50%)"},children:r("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:r("div",{className:"w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[8px] border-t-current"})})}),r("div",{className:"absolute inset-x-0 bottom-1 flex justify-between px-2 text-xs text-gray-500",children:[r("span",{children:"-50"}),r("span",{children:"-25"}),r("span",{className:"text-gray-400",children:"0"}),r("span",{children:"+25"}),r("span",{children:"+50"})]})]})]}),r("div",{className:"bg-gray-800 rounded-lg p-4",children:r("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r("div",{children:[r("span",{className:"text-gray-400",children:"Note Name:"}),r("span",{className:"ml-2 font-medium",children:t.noteName})]}),r("div",{children:[r("span",{className:"text-gray-400",children:"Octave:"}),r("span",{className:"ml-2 font-medium",children:t.octave})]})]})})]}):r("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[r("p",{className:"text-gray-400 text-lg",children:"No signal detected"}),r("p",{className:"text-gray-500 text-sm mt-2",children:"Play a note to see tuning information"})]}),r("div",{className:"bg-gray-800/50 rounded-lg p-4 text-sm text-gray-400",children:[r("p",{className:"mb-2",children:r("strong",{className:"text-gray-300",children:"About the Tuner:"})}),r("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[r("li",{children:"The tuner calculates note information directly from the theremin's frequency"}),r("li",{children:"No microphone needed - data comes directly from the ESP32"}),r("li",{children:'"In tune" means within ¬±10 cents of perfect pitch'}),r("li",{children:"100 cents = 1 semitone (musical half-step)"})]})]})]})}const ie=[{value:1.5,label:"1.5 Octaves",notes:19},{value:2,label:"2 Octaves",notes:25},{value:2.5,label:"2.5 Octaves",notes:31},{value:3,label:"3 Octaves",notes:37},{value:4,label:"4 Octaves",notes:49}],ct=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],ce=e=>ct[e%12].includes("#"),de=e=>{const t=e%12,n=Math.floor(e/12)-1;return`${ct[t]}${n}`},ue={a:60,s:62,d:64,f:65,g:67,h:69,j:71,k:72,w:61,e:63,t:66,y:68,u:70};function At(){const{send:e}=L(),[t,n]=w(2),[a,l]=w(null),[o,d]=w(new Set),[i,h]=w(100),[c,f]=w(!0),s=60,m=ie.find(b=>b.value===t)||ie[1],g=Array.from({length:m.notes},(b,N)=>s+N),x=b=>{const N=Object.entries(ue).find(([C,S])=>S===b);return N?N[0].toUpperCase():""},y=b=>{a!==b&&(l(b),e({cmd:"playNote",note:b}),e({cmd:"setAmplitude",value:i}))},p=()=>{l(null),e({cmd:"stopNote"}),e({cmd:"setAmplitude",value:0})},u=b=>{y(b)},_=()=>{p()};P(()=>(e({cmd:"setSensorEnabled",sensor:"both",enabled:!1}),()=>{e({cmd:"setSensorEnabled",sensor:"both",enabled:!0}),p()}),[]),P(()=>{if(!c)return;const b=C=>{if(C.target.tagName==="INPUT"||C.target.tagName==="SELECT")return;const S=C.key.toLowerCase(),M=ue[S];M&&!o.has(S)&&(C.preventDefault(),d(F=>new Set(F).add(S)),y(M))},N=C=>{const S=C.key.toLowerCase();ue[S]&&o.has(S)&&(C.preventDefault(),d(F=>{const O=new Set(F);return O.delete(S),O}),p())};return window.addEventListener("keydown",b),window.addEventListener("keyup",N),()=>{window.removeEventListener("keydown",b),window.removeEventListener("keyup",N)}},[c,o,i]);const T=()=>g.filter(b=>!ce(b-s)).map(b=>{const N=a===b,C=de(b);return r("button",{class:`white-key ${N?"active":""}`,onMouseDown:()=>u(b),onMouseUp:_,onMouseLeave:_,onTouchStart:S=>{S.preventDefault(),u(b)},onTouchEnd:S=>{S.preventDefault(),_()},children:[r("span",{class:"key-label",children:C}),c&&x(b)&&r("span",{class:"keyboard-shortcut",children:x(b)})]},b)}),D=()=>g.filter(b=>ce(b-s)).map(b=>{const N=a===b,C=de(b),M=`calc(${g.slice(0,b-s).filter(F=>!ce(F-s)).length*100/(m.notes-Math.floor(m.notes/12)*5)}% + 3.5%)`;return r("button",{class:`black-key ${N?"active":""}`,style:{left:M},onMouseDown:()=>u(b),onMouseUp:_,onMouseLeave:_,onTouchStart:F=>{F.preventDefault(),u(b)},onTouchEnd:F=>{F.preventDefault(),_()},children:[r("span",{class:"key-label",children:C}),c&&x(b)&&r("span",{class:"keyboard-shortcut",children:x(b)})]},b)});return r("div",{class:"p-6 max-w-7xl mx-auto",children:[r("div",{class:"mb-6",children:[r("h2",{class:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Keyboard"}),r("p",{class:"text-gray-600 dark:text-gray-400",children:"Play the theremin with a virtual piano keyboard"})]}),r("div",{class:"mb-6 bg-white dark:bg-gray-800 rounded-lg p-4 shadow",children:r("div",{class:"flex flex-col gap-4",children:[r("div",{class:"flex items-center gap-4",children:[r("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Octave Range:"}),r("select",{value:t,onChange:b=>{p(),n(parseFloat(b.target.value))},class:"px-3 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500",children:ie.map(b=>r("option",{value:b.value,children:b.label},b.value))}),r("div",{class:"ml-auto text-sm text-gray-600 dark:text-gray-400",children:a!==null?r("span",{class:"font-medium text-blue-600 dark:text-blue-400",children:["Playing: ",de(a)," (MIDI ",a,")"]}):r("span",{children:"Click or tap keys to play"})})]}),r("div",{class:"flex items-center gap-4",children:[r("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap",children:["Volume: ",i,"%"]}),r("input",{type:"range",min:"0",max:"100",value:i,onChange:b=>h(parseInt(b.target.value)),class:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${i}%, #e5e7eb ${i}%, #e5e7eb 100%)`}})]}),r("div",{class:"flex items-center gap-4",children:[r("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Keyboard Shortcuts"}),r("label",{class:"relative inline-flex items-center cursor-pointer",children:[r("input",{type:"checkbox",checked:c,onChange:b=>f(b.target.checked),class:"sr-only peer"}),r("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]}),r("span",{class:"text-xs text-gray-500 dark:text-gray-400",children:c?"Enabled":"Disabled"})]})]})}),r("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg",children:r("div",{class:"keyboard-container",children:[r("div",{class:"white-keys",children:T()}),r("div",{class:"black-keys",children:D()})]})}),c&&r("div",{class:"mt-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[r("h3",{class:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"‚å®Ô∏è Keyboard Shortcuts (1 Octave)"}),r("div",{class:"grid grid-cols-2 gap-4 text-xs text-blue-800 dark:text-blue-200",children:[r("div",{children:[r("p",{class:"font-medium mb-1",children:"White Keys (Naturals):"}),r("div",{class:"font-mono space-y-0.5",children:[r("div",{children:"A = C4 | S = D4 | D = E4 | F = F4"}),r("div",{children:"G = G4 | H = A4 | J = B4 | K = C5"})]})]}),r("div",{children:[r("p",{class:"font-medium mb-1",children:"Black Keys (Sharps):"}),r("div",{class:"font-mono space-y-0.5",children:[r("div",{children:"W = C#4 | E = D#4"}),r("div",{children:"T = F#4 | Y = G#4 | U = A#4"})]})]})]})]}),r("div",{class:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:r("p",{children:["üí° ",r("strong",{children:"Tip:"})," Use this keyboard to test effects, try different waveforms, and experiment with the synthesizer. Sensors are automatically disabled while using the keyboard."]})}),r("style",{jsx:!0,children:`
        .keyboard-container {
          position: relative;
          height: 200px;
          overflow-x: auto;
          overflow-y: hidden;
        }

        .white-keys {
          display: flex;
          gap: 2px;
          height: 100%;
        }

        .white-key {
          flex: 1;
          min-width: 40px;
          height: 100%;
          background: linear-gradient(to bottom, #ffffff 0%, #f0f0f0 100%);
          border: 2px solid #333;
          border-radius: 0 0 8px 8px;
          cursor: pointer;
          position: relative;
          transition: all 0.05s ease;
          display: flex;
          align-items: flex-end;
          justify-content: center;
          padding-bottom: 8px;
          user-select: none;
          -webkit-tap-highlight-color: transparent;
        }

        .white-key:hover {
          background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 100%);
          transform: translateY(2px);
        }

        .white-key.active {
          background: linear-gradient(to bottom, #4ade80 0%, #22c55e 100%);
          transform: translateY(4px);
          box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .black-keys {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 60%;
          pointer-events: none;
        }

        .black-key {
          position: absolute;
          width: 7%;
          height: 100%;
          background: linear-gradient(to bottom, #000 0%, #333 100%);
          border: 2px solid #000;
          border-radius: 0 0 6px 6px;
          cursor: pointer;
          pointer-events: auto;
          transition: all 0.05s ease;
          display: flex;
          align-items: flex-end;
          justify-content: center;
          padding-bottom: 6px;
          user-select: none;
          -webkit-tap-highlight-color: transparent;
          z-index: 10;
        }

        .black-key:hover {
          background: linear-gradient(to bottom, #333 0%, #555 100%);
          transform: translateY(2px);
        }

        .black-key.active {
          background: linear-gradient(to bottom, #22c55e 0%, #16a34a 100%);
          transform: translateY(3px);
          box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.5);
        }

        .key-label {
          font-size: 0.75rem;
          font-weight: 600;
          color: #666;
          pointer-events: none;
        }

        .keyboard-shortcut {
          position: absolute;
          top: 8px;
          right: 8px;
          font-size: 0.7rem;
          font-weight: 700;
          color: #3b82f6;
          background: rgba(255, 255, 255, 0.9);
          padding: 2px 6px;
          border-radius: 4px;
          pointer-events: none;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .black-key .key-label {
          color: #fff;
        }

        .black-key .keyboard-shortcut {
          background: rgba(59, 130, 246, 0.9);
          color: white;
        }

        .white-key.active .key-label,
        .black-key.active .key-label {
          color: white;
        }

        .white-key.active .keyboard-shortcut,
        .black-key.active .keyboard-shortcut {
          background: rgba(255, 255, 255, 0.95);
          color: #16a34a;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
          .keyboard-container {
            height: 150px;
          }

          .white-key {
            min-width: 30px;
          }

          .key-label {
            font-size: 0.65rem;
          }

          .keyboard-shortcut {
            font-size: 0.6rem;
            padding: 1px 4px;
            top: 4px;
            right: 4px;
          }
        }
      `})]})}function Wt({setView:e,views:t,defaultView:n,currentView:a,darkMode:l,setDarkMode:o}){const{connected:d}=L(),[i,h]=w(!1),c=f=>{e(f),h(!1)};return r("header",{class:"bg-white dark:bg-gray-800 shadow-md",children:r("div",{class:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:[r("div",{class:"flex items-center justify-between",children:[r("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white cursor-pointer hover:text-gray-700 dark:hover:text-gray-300 transition-colors",onClick:()=>e(n),children:"Therem[AI]n Control Panel"}),r("div",{class:"flex items-center gap-4",children:[r("nav",{class:"hidden md:flex gap-2",children:t.map(f=>{const s=f.id===a;return r("button",{onClick:()=>e(f.id),class:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${s?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 hover:bg-blue-200 dark:hover:bg-blue-800":"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:f.label},f.id)})}),r("button",{onClick:()=>o(!l),class:"p-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors","aria-label":"Toggle dark mode",children:r("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l?r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"}):r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),r("button",{onClick:()=>h(!i),class:"md:hidden p-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors","aria-label":"Toggle menu",children:r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),r("div",{class:"flex items-center gap-2",children:[r("div",{class:`w-3 h-3 rounded-full ${d?"bg-green-500":"bg-red-500"}`}),r("span",{class:"text-sm text-gray-600 dark:text-gray-400 hidden sm:inline",children:d?"Connected":"Disconnected"})]})]})]}),i&&r("nav",{class:"md:hidden mt-4 pb-2 border-t border-gray-200 dark:border-gray-700 pt-4",children:r("div",{class:"flex flex-col gap-2",children:t.map(f=>{const s=f.id===a;return r("button",{onClick:()=>c(f.id),class:`w-full text-left px-4 py-3 text-sm font-medium rounded-md transition-colors ${s?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 hover:bg-blue-200 dark:hover:bg-blue-800":"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:f.label},f.id)})})})]})})}const pe=[{id:"dashboard",label:"Dashboard",component:st,default:!0},{id:"oscillators",label:"Oscillators",component:Mt},{id:"effects",label:"Effects",component:Tt},{id:"sensors",label:"Sensors",component:Dt},{id:"tuner",label:"Tuner",component:Pt},{id:"keyboard",label:"Keyboard",component:At}];var Be;const Ie=((Be=pe.find(e=>e.default))==null?void 0:Be.id)||"dashboard";function Lt(){const t=new URLSearchParams(window.location.search).get("ws");if(t){const n=`ws://${t}/ws`;return console.log("[WebSocket] Using URL parameter:",n),{url:n,isOverridden:!0,source:t}}return console.log("[WebSocket] Using default (window.location.hostname)"),{url:void 0,isOverridden:!1,source:null}}function Ut(){var d;const[e,t]=w(Ie),[n,a]=w(()=>{const i=localStorage.getItem("darkMode");return i?JSON.parse(i):!0});P(()=>{n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(n))},[n]);const l=((d=pe.find(i=>i.id===e))==null?void 0:d.component)||st,o=Lt();return r(Ft,{url:o.url,children:r("div",{class:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[o.isOverridden&&r("div",{class:"bg-yellow-500 text-black px-4 py-2 text-center text-sm font-medium",children:["‚ö†Ô∏è Development Mode: Connected to ",o.source]}),r(Wt,{setView:t,views:pe.map(i=>({id:i.id,label:i.label})),defaultView:Ie,currentView:e,darkMode:n,setDarkMode:a}),r(l,{})]})})}yt(ye(Ut),document.getElementById("app"));
